This project has two apps in it, one for exporting your campaign from Roll 20, the other for converting it into a Foundry VTT world.

# R20Exporter

For now, this is how you do it (Eventually I'll make it integrate UI elements into the page):
* or just follow these instructions : 

1 - Open R20 campaign in chrome (Make sure you have the latest version of chrome, it will not work in Firefox), 
2 - Wait for it to finish loading the page, 
3 - press Ctrl-Alt-J to open the development console. 
4 - copy-paste the whole R20Exporter.js file contents into the development console and press Enter.
7 - Type : R20Exporter.exportCampaignZip()
8 - Wait for it to parse all the data, could take a few minutes as it downloads all of the assets
9 - Zip file will start downloading once it's done.

While generating the ZIP file, do make sure you have the campaign tab focused in chrome (separate it in its own window if needed), otherwise the download speed of the zip will drop to very very slow transfer speeds since the javascript that generates the zip on the fly will be running as a low priority background process.

# R20Converter

This is a python script that does the entire conversion from a Roll20 campaign into a Foundry VTT world.
You can run it with `python src/R20Converter.py` and use the --help option to see which options are available.
If you're on windows, run `windows\R20Converter.exe` instead.

You first need to give it the name of the directory to which you want it to export the world (don't forget that the directory name needs to be url-friendly, so don't use spaces) then you provide it with the path to the zip file generated by R20Exporter, then the script will do the conversion for you.

I personally run it this way on linux : 

```
./src/R20Converter.py --auto-doors --enable-fog --restrict-movement --gm-password "mygmpassword"  "my-world" "My R20 campaign.zip"
```

If you are on Windows and use the windows binary, open a command prompt (cmd.exe) and go to the directory where the script is, then run tofvtt.exe with the options you want.

```
C:\Users\kakaroto\Downloads\R20Exporter_and_R20Converter\windows\R20Converter.exe --auto-doors --enable-fog --restrict-movement "my-world" "My R20 campaign.zip"

If you see a "Page '<page name>' doesn't have a recognizable map background" message on the console, don't worry about it, it just means that the background image size does not fit exactly the size of the page itself, the background image will then be placed as a Tile instead.

When the script is done, copy the new directory to the app/resources/public/worlds directory in your FVTT installation and load the world in FVTT. 
For now, actors will be created but with dummy statistics. For NPCs, you can use Felix's [Roll20 NPC Importer module](https://github.com/syl3r86/roll20npcimporter) to import all of the NPC characters into the world. Simply extract your campaign's ZIP file, do an "import NPC" from FVTT and go to the campaign's extracted zip file, in characters subfolder and do a search (top-right corner in the windows file chooser dialog) and look for "character.json" then import them all. The NPC importer module will ask if you want to overwrite existing monsters, select yes and apply to all, select the "Don't update Avatar and Token images" so it doesn't replace the local file avatar/tokens with the Roll20 URL.
And you're done!
The only thing missing will be playable characters, for which support is coming soon. In the meantime, create your playable characters manually, or if you use D&D Beyond, check out [Beyond20](https://beyond20.here-for-more.info)