This project has two apps in it, one for exporting your campaign from Roll 20, the other for converting it into a Foundry VTT world.

# R20Exporter
You can either install the script as a [Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en) user script, or, if you don't use or don't want to use Tampermonkey, then you can also open the standalone file and copy/paste its content in the browser's console instead.

Make sure you use Chrome, as this will not work on Firefox or other browsers.

If you use Tampermonkey, then install the dist/R20Exporter.js file as a user script then reload your R20 campaign page.
If you want to use the standalone method instead, then open your R20 campaign, then press F12 to open the developer's console, open the dist/R20Exporter_standalone.js file and copy/paste its content into the developer's console and press Enter.

To export your campaign go to the settings tab in the Roll20 page (the gear icon on the far right of the sidebar) and at the top you should see a button "Export Campaign to ZIP". Simply click on it, then wait until the ZIP file is downloaded.

While generating the ZIP file, do make sure you have the campaign tab focused in chrome (separate it in its own window if needed), otherwise the download speed of the zip will drop to very very slow transfer speeds since the javascript that generates the zip on the fly will be running as a low priority background process.

# R20Converter

This is a python script that does the entire conversion from a Roll20 campaign into a Foundry VTT world.
You can run it with `python src/R20Converter.py` and use the --help option to see which options are available.
If you're on windows, run `windows\R20Converter.exe` instead.

You first need to give it the name of the directory to which you want it to export the world (don't forget that the directory name needs to be url-friendly, so don't use spaces) then you provide it with the path to the zip file generated by R20Exporter, then the script will do the conversion for you.

I personally run it this way on linux : 

```
./src/R20Converter.py --auto-doors --enable-fog --restrict-movement --gm-password "mygmpassword"  "my-world" "My R20 campaign.zip"
```

If you are on Windows and use the windows binary, open a command prompt (cmd.exe) and go to the directory where the script is, then run R20Converter.exe with the options you want.

```
C:\Users\kakaroto\Downloads\R20Exporter_and_R20Converter\windows\R20Converter.exe --auto-doors --enable-fog --restrict-movement "my-world" "My R20 campaign.zip"

If you see a "Page '<page name>' doesn't have a recognizable map background" message on the console, don't worry about it, it just means that the background image size does not fit exactly the size of the page itself, the background image will then be placed as a Tile instead.

When the script is done, copy the new directory to the app/resources/public/worlds directory in your FVTT installation and load the world in FVTT. 
For now, actors will be created but with dummy statistics. For NPCs, you can use Felix's [Roll20 NPC Importer module](https://github.com/syl3r86/roll20npcimporter) to import all of the NPC characters into the world. Simply extract your campaign's ZIP file, do an "import NPC" from FVTT and go to the campaign's extracted zip file, in characters subfolder and do a search (top-right corner in the windows file chooser dialog) and look for "character.json" then import them all. The NPC importer module will ask if you want to overwrite existing monsters, select yes and apply to all, select the "Don't update Avatar and Token images" so it doesn't replace the local file avatar/tokens with the Roll20 URL.
And you're done!
The only thing missing will be playable characters, for which support is coming soon. In the meantime, create your playable characters manually, or if you use D&D Beyond, check out [Beyond20](https://beyond20.here-for-more.info)